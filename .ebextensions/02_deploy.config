packages:
  yum:
    libjpeg-turbo-devel: []
    libpng-devel: []
    libcurl-devel: []
    libsndfile-devel: []
    postgresql: []

container_commands:
  01_migrate:
      command: "source /var/app/venv/staging*/bin/activate && python3 manage.py makemigrations"
      leader_only: true
  02_migrate:
    command: "source /var/app/venv/staging*/bin/activate && python3 manage.py migrate"
    leader_only: true
  03_populate_dummy: 
    command: "source /var/app/venv/staging*/bin/activate && python3 manage.py populate_toy"
    leader_only: true
  04_npm_install:
    command: "echo npm install --production"
  05_staticone:
    command: "source /var/app/venv/staging*/bin/activate && python3 manage.py collectstatic --noinput"
  06_compressor:
    command: "source /var/app/venv/staging*/bin/activate && python3 manage.py compress --force"    

option_settings:
  aws:elasticbeanstalk:application:environment:
    DJANGO_SETTINGS_MODULE: microfaune_annotator.settings
  aws:elasticbeanstalk:container:python:
    WSGIPATH: microfaune_annotator/wsgi.py
